{% extends 'base.html' %}

{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'brassin/css/style.css' %}" />
{% endblock %}

{% block content %}

<div class="jumbotron jumbotron-fluid">
  <div class="container">
    <h1 class="page-header">Ingredients</h1>
  </div>
</div>

<a class="btn btn-info btn-sm" href="{% url 'ingredient_create' %}"><i class="fas fa-plus"></i>  Ajouter ingredient</a>
<br/><br/>

<div class="row ">

  <!--- MALTS --------------------------------------------------------------------------->
  <div class="col-sm-4">

    <h4>Malts</h4>

      <table class="table" id="Malt-table">
        <thead class="thead-light">
          <tr>
            <th>Variété</th>
            <th>Stock</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for ingredient in malt %}
          <tr data-toggle="collapse" data-target="#dataMalt{{ingredient.id}}" class="clickable">
            <td>{{ ingredient.variete }}</td>
            <td>{% if ingredient.stock < 1 %}{% widthratio ingredient.stock 1 1000 %} g{% else %}{{ ingredient.stock|floatformat }} kg{% endif %}</td>
            <td><a class="btn btn-outline-dark btn-sm" href="{% url 'ingredient_update' ingredient.id %}"><i class="fas fa-edit"></i></a></td>
            <td><a class="btn btn-outline-danger btn-sm" href="{% url 'ingredient_delete' ingredient.id %}"><i class="fas fa-times"></i></a></td>
          </tr>
          <tr>
            <td colspan="4" style="border-top:none !important;">
                <div id="dataMalt{{ingredient.id}}" class="collapse">
                    {{ingredient.propriete}}
                    {% if ingredient.description %}{{ingredient.description|linebreaksbr}}{% endif %}
                </div>
            </td>
          </tr>
          {% empty %}
            <tr>
              <td colspan="7" class="text-center bg-warning">Pas encore d'ingredient.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

  </div>

  <!--- HOUBLONS --------------------------------------------------------------------------->
  <div class="col-sm-4">

    <h4>Houblons</h4>

      <table class="table" id="Houblon-table">
        <thead class="thead-light">
          <tr>
            <th>Variété</th>
            <th>Stock</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for ingredient in houblon %}
          <tr data-toggle="collapse" data-target="#dataHoublon{{ingredient.id}}" class="clickable">
            <td>{{ ingredient.variete }}</td>
            <td>{% if ingredient.stock < 1 %}{% widthratio ingredient.stock 1 1000 %} g{% else %}{{ ingredient.stock|floatformat }} kg{% endif %}</td>
            <td><a class="btn btn-outline-dark btn-sm" href="{% url 'ingredient_update' ingredient.id %}"><i class="fas fa-edit"></i></a></td>
            <td><a class="btn btn-outline-danger btn-sm" href="{% url 'ingredient_delete' ingredient.id %}"><i class="fas fa-times"></i></a></td>
          </tr>
          <tr>
            <td colspan="4" style="border-top:none !important;">
                <div id="dataHoublon{{ingredient.id}}" class="collapse">
                    {{ingredient.propriete}}

                    {% if ingredient.description %}{{ingredient.description|linebreaksbr}}{% endif %}
                </div>
            </td>
          </tr>

          {% empty %}
            <tr>
              <td colspan="7" class="text-center bg-warning">Pas encore d'ingredient.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

  </div>

  <!--- AUTRES --------------------------------------------------------------------------->
  <div class="col-sm-4">

    <h4>Autre</h4>

      <table class="table" id="Autre-table">
        <thead class="thead-light">
          <tr>
            <th>Variété</th>
            <th>Stock</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for ingredient in autre %}
          <tr>
            <td>{{ ingredient.variete }}</td>
            <td>{% if ingredient.stock < 1 %}{% widthratio ingredient.stock 1 1000 %} g{% else %}{{ ingredient.stock|floatformat }} kg{% endif %}</td>
            <td><a class="btn btn-outline-dark btn-sm" href="{% url 'ingredient_update' ingredient.id %}"><i class="fas fa-edit"></i></a></td>
            <td><a class="btn btn-outline-danger btn-sm" href="{% url 'ingredient_delete' ingredient.id %}"><i class="fas fa-times"></i></a></td>
          </tr>
          {% empty %}
            <tr>
              <td colspan="7" class="text-center bg-warning">Pas encore d'ingredient.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

  </div>

</div>

{% endblock %}

{% block javascript %}
  <script type="text/javascript" src="{% static 'brassin/js/brassin.js' %}"></script>
{% endblock %}
